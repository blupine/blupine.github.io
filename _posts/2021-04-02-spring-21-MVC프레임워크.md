---
layout: post
title:  "[스프링 MVC] MVC 프레임워크 만들기 (2)"
subtitle: ""
date:   2021-04-02 21:33:57 +0900
categories: dev
tags : Spring
---

스프링 MVC의 동작 원리와 개발 히스토리를 이해하고자 MVC 프레임워크를 구현해보며 작성한 포스팅이며, 모든 포스팅의 내용은 김영한 님의 '스프링 MVC 1편 - 백엔드 웹 개발 핵심 기술' 강의를 참고하여 작성합니다.


[base commit]({{"https://github.com/blupine/servlet-practice/commit/c2993fada3f3a5ec0b676eb602642723419e92f9"}})

해당 포스팅에서 작성하는 모든 내용은 위 base commit을 기반으로 해당 repository에 구현됨


------------------------------------------------------------

이전 포스팅에서 MVC 이전 포스팅에서 서블릿과 프론트 컨트롤러 패턴을 이용해서 기본적인 MVC 프레임워크를 구현했었다. 그러나 해당 버전에서는 몇 가지 문제가 있다.

#### 서블릿 종속성 문제
해당 버전에서는 모든 컨트롤러가 `HttpServletRequest`, `HttpServletResponse`를 파라미터로 전달받으며, 서블릿에 의존한다는 문제가 있다. 

```java
// ControllerV2.java
public interface ControllerV2 {
    MyView process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException;
}
```

위와 같이 컨트롤러가 `HttpServletRequest`, `HttpServletResponse`를 파라미터로 전달받도록 구현했었는데, 사실 컨트롤러에서 필요한 건 해당 인스턴스들이 아닌 `Request`에 포함된 파라미터 정보이다. 따라서 파라미터 정보만 메소드의 인자로 넘겨주면, 컨트롤러 개발자는 서블릿에 대해서 알지 못해도 컨트롤러의 구현이 가능하다. (`Model` 객체를 이용해서 View에 데이터를 전달한다.)

컨트롤러가 서블릿에 의존하지 않을 경우 구현 코드도 단순해지고.. 무엇보다 테스트 코드 작성이 쉬워진다.

#### 뷰 이름 중복 문제
컨트롤러에서 지정하는 View 이름에 중복이 있다. View의 경로 이름이 바뀔 경우 모든 컨트롤러가 수정되어야 하고, 모든 컨트롤러마다 중복해서 공통 경로를 작성해줘야 한다는 점이 번거롭다. 컨트롤러는 아래처럼 View의 이름만 반환하도록 하고, 공통 경로는 `FrontController`에서 처리하도록 수정한다.(`ViewResolver`)
`"/WEB-INF/views/new-form.jsp` -> `new-form.jsp`

### V3 구조
- ![1]({{"assets/img/dev/spring/21/1.png" | absolute_url}})

-------------------------------------------------------

